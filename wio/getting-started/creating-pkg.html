

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Creating Pkg &mdash; Wio Docs 1.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="prev" title="Creating App" href="creating-app.html" /> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html">
          

          
            
            <img src="../../_static/logo_black.png" class="logo" alt="Logo"/>
          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../what-is-wio.html">What is Wio?</a></li>
</ul>
<p class="caption"><span class="caption-text">Install</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../install/linux.html">Linux</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install/macos.html">MacOS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install/windows.html">Windows</a></li>
</ul>
<p class="caption"><span class="caption-text">Getting Started</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="creating-app.html">Creating App</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Creating Pkg</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#setting-up-the-project">Setting up the Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="#initialize-the-package">Initialize the Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="#building-and-executing">Building and Executing</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Wio Docs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
      <li>Creating Pkg</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="http://prose.io/#wio/docs/blob/master/docs/wio/getting-started/creating-pkg.md" class="fa fa-github"> Edit</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="creating-pkg">
<span id="creating-pkg"></span><h1>Creating Pkg<a class="headerlink" href="#creating-pkg" title="Permalink to this headline">¶</a></h1>
<p>In the ecosystem of <code class="docutils literal notranslate"><span class="pre">wio</span></code>, <code class="docutils literal notranslate"><span class="pre">pkg</span></code> is a project that is included as a dependency by other projects. It cannot be executed on its own.</p>
<div class="section" id="setting-up-the-project">
<span id="setting-up-the-project"></span><h2>Setting up the Project<a class="headerlink" href="#setting-up-the-project" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">wio</span> <span class="n">create</span> <span class="n">pkg</span> <span class="n">examplePackage</span> 
</pre></div>
</div>
<ul class="simple">
<li>This will create a project in directory <code class="docutils literal notranslate"><span class="pre">examplePackage</span></code></li>
</ul>
<p>Congrats you have created your first <code class="docutils literal notranslate"><span class="pre">wio</span></code> package. Your project structure will look like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>examplePackage
├── include
├── src
├── tests
├── wio.yml
├── README.md
├── .gitignore
</pre></div>
</div>
<p>The result of generated <code class="docutils literal notranslate"><span class="pre">wio.yml</span></code> file:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">pkg</span>

<span class="l l-Scalar l-Scalar-Plain">project</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">examplePackage</span>
  <span class="l l-Scalar l-Scalar-Plain">version</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">0.0.1</span>
  <span class="l l-Scalar l-Scalar-Plain">keywords</span><span class="p p-Indicator">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">wio</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">pkg</span>
  <span class="l l-Scalar l-Scalar-Plain">compile_options</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">wio_version</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">0.4.0</span>
    <span class="l l-Scalar l-Scalar-Plain">default_target</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">tests</span>

<span class="l l-Scalar l-Scalar-Plain">targets</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">tests</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">src</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">tests</span>
</pre></div>
</div>
</div>
<div class="section" id="initialize-the-package">
<span id="initialize-the-package"></span><h2>Initialize the Package<a class="headerlink" href="#initialize-the-package" title="Permalink to this headline">¶</a></h2>
<p>Now we will create <code class="docutils literal notranslate"><span class="pre">hello.hh</span></code> and <code class="docutils literal notranslate"><span class="pre">hello.cpp</span></code> files and place them in <code class="docutils literal notranslate"><span class="pre">include</span></code> and <code class="docutils literal notranslate"><span class="pre">src</span></code> folder respectively.</p>
<p><code class="docutils literal notranslate"><span class="pre">hello.hh</span></code> file in <code class="docutils literal notranslate"><span class="pre">include</span></code> directory:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#ifndef HELLO_HH</span>
<span class="cp">#define HELLO_HH</span>

<span class="kt">void</span> <span class="nf">printHello</span><span class="p">();</span>

<span class="cp">#endif</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">hello.cpp</span></code> file in <code class="docutils literal notranslate"><span class="pre">src</span></code> directory:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;hello.hh&quot;</span><span class="cp"></span>

<span class="cp">#if defined(WIO_PLATFORM_AVR) &amp;&amp; defined(WIO_FRAMEWORK_ARDUINO)</span>
<span class="cp">#include</span> <span class="cpf">&lt;Arduino.h&gt;</span><span class="cp"></span>

<span class="kt">void</span> <span class="nf">printHello</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Hello world&quot;</span><span class="p">);</span>
<span class="p">}</span>
<span class="cp">#elif defined(WIO_PLATFORM_NATIVE)</span>
<span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>

<span class="kt">void</span> <span class="nf">printHello</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Hello World&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>
<span class="cp">#else</span>
<span class="cp">#error &quot;Unsupported Platform or Framework&quot;</span>
<span class="cp">#endif</span>
</pre></div>
</div>
<p>Final project structure will look like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>examplePackage
└── include
    └── hello.hh
└── src
    └── hello.cpp
├── wio.yml
├── README.md
├── .gitignore
</pre></div>
</div>
</div>
<div class="section" id="building-and-executing">
<span id="building-and-executing"></span><h2>Building and Executing<a class="headerlink" href="#building-and-executing" title="Permalink to this headline">¶</a></h2>
<p>We have a package where “Hello World” is printed based on what platform the code is compiled and executed on. In order to test this package, we will create multiple targets for various platforms and see if our package code works.</p>
<p><code class="docutils literal notranslate"><span class="pre">wio.yml</span></code> after update:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">pkg</span>

<span class="l l-Scalar l-Scalar-Plain">project</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">examplePackage</span>
  <span class="l l-Scalar l-Scalar-Plain">license</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">MIT</span>
  <span class="l l-Scalar l-Scalar-Plain">author</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">Wio</span>
  <span class="l l-Scalar l-Scalar-Plain">version</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">0.0.1</span>
  <span class="l l-Scalar l-Scalar-Plain">keywords</span><span class="p p-Indicator">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">wio</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">app</span>
  <span class="l l-Scalar l-Scalar-Plain">compile_options</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">wio_version</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">0.4.0</span>
    <span class="l l-Scalar l-Scalar-Plain">default_target</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">main</span>

<span class="l l-Scalar l-Scalar-Plain">targets</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">native</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">src</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">tests/native</span>
    <span class="l l-Scalar l-Scalar-Plain">platform</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">native</span>
  <span class="l l-Scalar l-Scalar-Plain">arduino</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">src</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">tests/arduino</span>
    <span class="l l-Scalar l-Scalar-Plain">platform</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">avr</span>
    <span class="l l-Scalar l-Scalar-Plain">framework</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">arduino</span>
    <span class="l l-Scalar l-Scalar-Plain">board</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">uno</span>
  <span class="l l-Scalar l-Scalar-Plain">cosa</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">src</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">tests/cosa</span>
    <span class="l l-Scalar l-Scalar-Plain">platform</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">avr</span>
    <span class="l l-Scalar l-Scalar-Plain">framework</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">cosa</span>
    <span class="l l-Scalar l-Scalar-Plain">board</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">uno</span>
</pre></div>
</div>
<p>Testing the package is simple but, before we do that, we need to create a simple test for <code class="docutils literal notranslate"><span class="pre">native</span></code> and <code class="docutils literal notranslate"><span class="pre">avr</span></code> platforms.</p>
<p><code class="docutils literal notranslate"><span class="pre">test.cpp</span></code> file in <code class="docutils literal notranslate"><span class="pre">tests/native</span></code> directory:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;hello.hh&gt;</span><span class="cp"></span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">printHello</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">test.cpp</span></code> file in <code class="docutils literal notranslate"><span class="pre">tests/arduino</span></code> directory:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;hello.hh&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;Arduino.h&gt;</span><span class="cp"></span>

<span class="kt">void</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">9600</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">loop</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">printHello</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">test.cpp</span></code> file in <code class="docutils literal notranslate"><span class="pre">tests/cosa</span></code> directory:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;hello.hh&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;UART.hh&gt;</span><span class="cp"></span>

<span class="kt">void</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">uart</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">9600</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">loop</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">printHello</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Now to build each target:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># native target (valid build)</span>
wio build native

<span class="c1"># arduino target (valid build)</span>
wio build arduino

<span class="c1"># cosa target (invalid build)</span>
wio build cosa
</pre></div>
</div>
<p>To execute each target:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># native</span>
wio run native

<span class="c1"># arduino</span>
wio run arduino

<span class="c1"># cosa (this won&#39;t work because cosa target is not compiled)</span>
wio run cosa
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="creating-app.html" class="btn btn-neutral" title="Creating App" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Waterloop.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="http://prose.io/#rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'1.0',
            LANGUAGE:'en',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  <script type="text/javascript" src="../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>